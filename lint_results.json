[{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\api\\artist\\artwork\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'req' is defined but never used.","line":7,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[375,378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[375,378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[586,589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[586,589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[815,818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[815,818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1057,1060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1057,1060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1890,1893],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1890,1893],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadData' is assigned a value but never used.","line":56,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2680,2683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2680,2683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2965,2968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2965,2968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session || (session.user as any).role !== \"ARTIST\") {\r\n      return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    const artworks = await prisma.artwork.findMany({\r\n      where: { artistId: (session.user as any).id },\r\n      include: {\r\n        artist: true,\r\n        likes: true, // Include likes so the count works\r\n      },\r\n      orderBy: { createdAt: 'desc' }\r\n    });\r\n\r\n    return NextResponse.json(artworks);\r\n  } catch (error: any) {\r\n    return NextResponse.json({ message: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n    if (!session || (session.user as any).role !== \"ARTIST\") {\r\n      return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    const supabase = createClient(\r\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n      process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n    );\r\n\r\n    const formData = await req.formData();\r\n    const file = formData.get(\"file\") as File;\r\n    const title = formData.get(\"title\") as string;\r\n    const price = parseFloat(formData.get(\"price\") as string);\r\n    const tagsRaw = formData.get(\"tags\") as string;\r\n    const tagsArray = tagsRaw\r\n      ? tagsRaw.split(\",\").map(t => t.trim().toLowerCase()).filter(t => t !== \"\")\r\n      : [];\r\n\r\n    // 1. Convert File to ArrayBuffer for Supabase\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const buffer = Buffer.from(arrayBuffer);\r\n    const fileName = `${(session.user as any).id}/${Date.now()}-${file.name.replace(/\\s+/g, '_')}`;\r\n\r\n    // 2. Upload to Storage\r\n    const { data: uploadData, error: uploadError } = await supabase.storage\r\n      .from(\"artwork\")\r\n      .upload(fileName, buffer, {\r\n        contentType: file.type,\r\n        cacheControl: '3600',\r\n        upsert: false\r\n      });\r\n\r\n    if (uploadError) {\r\n      console.error(\"SUPABASE STORAGE ERROR:\", uploadError);\r\n      return NextResponse.json({ message: uploadError.message }, { status: 500 });\r\n    }\r\n\r\n    const { data: { publicUrl } } = supabase.storage.from(\"artwork\").getPublicUrl(fileName);\r\n\r\n    // 3. Save to DB\r\n    const newArtwork = await prisma.artwork.create({\r\n      data: {\r\n        title,\r\n        price,\r\n        imageUrl: publicUrl,\r\n        artistId: (session.user as any).id,\r\n        medium: formData.get(\"medium\") as string || \"Unknown\",\r\n        dimensions: formData.get(\"dimensions\") as string || \"N/A\",\r\n        tags: tagsArray,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({ message: \"Success\", artwork: newArtwork });\r\n\r\n  } catch (error: any) {\r\n    console.error(\"FULL API ERROR:\", error);\r\n    return NextResponse.json({ message: error.message }, { status: 500 });\r\n  }\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\api\\artwork\\[id]\\like\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1682,1685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1682,1685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(\r\n    req: Request,\r\n    { params }: { params: Promise<{ id: string }> }\r\n) {\r\n    try {\r\n        const { id: artworkId } = await params;\r\n        const session = await getServerSession(authOptions);\r\n\r\n        if (!session || !session.user?.email) {\r\n            return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\r\n        }\r\n        const user = await prisma.user.findUnique({\r\n            where: { email: session.user.email }\r\n        });\r\n\r\n        if (!user) {\r\n            return NextResponse.json({ message: \"User not found\" }, { status: 404 });\r\n        }\r\n\r\n        const existingLike = await prisma.like.findUnique({\r\n            where: {\r\n                userId_artworkId: {\r\n                    userId: user.id,\r\n                    artworkId: artworkId,\r\n                },\r\n            },\r\n        });\r\n\r\n        if (existingLike) {\r\n            await prisma.like.delete({\r\n                where: {\r\n                    userId_artworkId: {\r\n                        userId: user.id,\r\n                        artworkId: artworkId,\r\n                    },\r\n                },\r\n            });\r\n            return NextResponse.json({ message: \"Unliked\" });\r\n        } else {\r\n            await prisma.like.create({\r\n                data: {\r\n                    userId: user.id,\r\n                    artworkId: artworkId,\r\n                },\r\n            });\r\n            return NextResponse.json({ message: \"Liked\" });\r\n        }\r\n    } catch (error: any) {\r\n        return NextResponse.json(\r\n            { message: \"Error toggling like\", error: error.message },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\api\\auth\\register\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport prisma from \"@/lib/prisma\";\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { name, email, password } = await req.json();\r\n\r\n        if (!email || !password) {\r\n            return NextResponse.json(\r\n                { message: \"Missing email or password\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const existingUser = await prisma.user.findUnique({\r\n            where: { email }\r\n        });\r\n\r\n        if (existingUser) {\r\n            return NextResponse.json(\r\n                { message: \"User already exists\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n        const user = await prisma.user.create({\r\n            data: {\r\n                name,\r\n                email,\r\n                password: hashedPassword,\r\n            }\r\n        });\r\n\r\n        return NextResponse.json(\r\n            { message: \"User registered successfully\", user: { id: user.id, email: user.email } },\r\n            { status: 201 }\r\n        );\r\n    } catch (error: any) {\r\n        return NextResponse.json(\r\n            { message: \"Error registering user\", error: error.message },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\api\\user\\preferences\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[995,998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[995,998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3699,3702],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3699,3702],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function PUT(req: Request) {\r\n    try {\r\n        const session = await getServerSession(authOptions);\r\n        const body = await req.json();\r\n\r\n        if (!session || !session.user?.email) {\r\n            return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\r\n        }\r\n\r\n        const updatedUser = await prisma.user.update({\r\n            where: { email: session.user.email },\r\n            data: {\r\n                role: body.role,\r\n                onboarded: true,\r\n                preferences: {\r\n                    context: body.context,\r\n                    budget: body.budget,\r\n                    styles: body.styles,\r\n                },\r\n            },\r\n        });\r\n\r\n        return NextResponse.json({ message: \"Preferences updated\", user: updatedUser });\r\n    } catch (error: any) {\r\n        return NextResponse.json(\r\n            { message: \"Error updating preferences\", error: error.message },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\nexport async function GET() {\r\n    try {\r\n        const session = await getServerSession(authOptions);\r\n        if (!session?.user?.email) {\r\n            return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\r\n        }\r\n\r\n        const user = await prisma.user.findUnique({\r\n            where: { email: session.user.email },\r\n            include: { likes: true }\r\n        });\r\n\r\n        if (!user || !user.preferences) {\r\n            return NextResponse.json({ message: \"No preferences found\" }, { status: 404 });\r\n        }\r\n\r\n        const preferences = user.preferences as { budget: string; styles: string[] };\r\n        const searchStyles = preferences.styles.map(s => s.toLowerCase());\r\n\r\n        // Parse Price Range\r\n        const budgetStr = preferences.budget.replace(/[\\$,]/g, \"\"); \r\n        let minPrice = 0, maxPrice = 1000000;\r\n\r\n        if (budgetStr.includes(\"-\")) {\r\n            const parts = budgetStr.split(\"-\");\r\n            minPrice = parseInt(parts[0]) || 0;\r\n            maxPrice = parseInt(parts[1]) || 1000000;\r\n        } else if (budgetStr.includes(\"+\")) {\r\n            minPrice = parseInt(budgetStr) || 0;\r\n        }\r\n\r\n        // Fetch Artworks with Join\r\n        const artworks = await prisma.artwork.findMany({\r\n            where: {\r\n                OR: [\r\n                    // 1. Check for exact matches in tags\r\n                    { tags: { hasSome: searchStyles } },\r\n                    // 2. Fuzzy search: Check if any style is contained in the title or medium\r\n                    ...searchStyles.map(style => ({\r\n                        title: { contains: style, mode: 'insensitive' as const }\r\n                    }))\r\n                ],\r\n                // Only apply price filter if explicitly set\r\n                price: { gte: minPrice, lte: maxPrice }\r\n            },\r\n            include: {\r\n                artist: { select: { name: true } },\r\n                likes: true\r\n            }\r\n        });\r\n\r\n        const likedIds = user.likes.map(l => l.artworkId);\r\n\r\n        // Map data to a \"Flat\" structure for the frontend\r\n        const formattedArtworks = artworks.map(art => ({\r\n            ...art,\r\n            artistName: art.artist?.name || \"Independent Artist\",\r\n            isLiked: likedIds.includes(art.id),\r\n            likesCount: art.likes.length\r\n        }));\r\n\r\n        return NextResponse.json({\r\n            artworks: formattedArtworks,\r\n            userStyles: preferences.styles // Send back for the UI header\r\n        });\r\n\r\n    } catch (error: any) {\r\n        return NextResponse.json({ message: error.message }, { status: 500 });\r\n    }\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\artist\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[280,283],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[280,283],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":111,"column":41,"nodeType":"JSXOpeningElement","endLine":111,"endColumn":178},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":162,"column":49,"nodeType":"JSXOpeningElement","endLine":162,"endColumn":123}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Navbar from \"@/components/ui/Navbar\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function ArtistDashboard() {\r\n    const router = useRouter();\r\n    const [artworks, setArtworks] = useState<any[]>([]);\r\n    const [fetching, setFetching] = useState(true);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    \r\n    const [file, setFile] = useState<File | null>(null);\r\n    const [preview, setPreview] = useState<string | null>(null);\r\n    const [formData, setFormData] = useState({\r\n        title: \"\",\r\n        price: \"\",\r\n        medium: \"\",\r\n        dimensions: \"\",\r\n        tags: \"\",\r\n    });\r\n\r\n    const fetchArtworks = async () => {\r\n        try {\r\n            const res = await fetch(\"/api/artist/artwork\");\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setArtworks(data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching art:\", error);\r\n        } finally {\r\n            setFetching(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => { fetchArtworks(); }, []);\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const selectedFile = e.target.files?.[0];\r\n        if (selectedFile) {\r\n            setFile(selectedFile);\r\n            setPreview(URL.createObjectURL(selectedFile));\r\n        }\r\n    };\r\n\r\n    const handleUpload = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!file) return alert(\"Please select an image\");\r\n\r\n        setLoading(true);\r\n        const data = new FormData();\r\n        data.append(\"file\", file);\r\n        Object.entries(formData).forEach(([key, val]) => data.append(key, val));\r\n\r\n        try {\r\n            const res = await fetch(\"/api/artist/artwork\", {\r\n                method: \"POST\",\r\n                body: data,\r\n            });\r\n\r\n            if (res.ok) {\r\n                setIsUploading(false);\r\n                setFile(null);\r\n                setPreview(null);\r\n                setFormData({ title: \"\", price: \"\", medium: \"\", dimensions: \"\", tags: \"\" });\r\n                fetchArtworks();\r\n                router.refresh();\r\n            } else {\r\n                const err = await res.json();\r\n                alert(`Upload failed: ${err.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Upload error:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative min-h-screen bg-gray-50 text-black\">\r\n            <Navbar />\r\n            <main className=\"max-w-7xl mx-auto py-12 px-6\">\r\n                \r\n                {/* Header */}\r\n                <div className=\"flex justify-between items-center mb-12\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-bold tracking-tight\">Artist Studio</h1>\r\n                        <p className=\"text-gray-500 mt-2\">Manage your collection and track your reach.</p>\r\n                    </div>\r\n                    <button \r\n                        onClick={() => setIsUploading(true)}\r\n                        className=\"bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold hover:bg-indigo-500 transition-all shadow-xl hover:scale-[1.02] active:scale-[0.98]\"\r\n                    >\r\n                        + List New Work\r\n                    </button>\r\n                </div>\r\n\r\n                {/* GALLERY GRID */}\r\n                <div className=\"bg-white rounded-[2.5rem] p-8 shadow-sm border border-gray-100 min-h-[500px]\">\r\n                    <h2 className=\"text-xl font-bold mb-8\">Published Portfolio</h2>\r\n                    \r\n                    {fetching ? (\r\n                        <div className=\"flex justify-center py-20 italic text-gray-400\">Loading gallery...</div>\r\n                    ) : artworks.length > 0 ? (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                            {artworks.map((art) => (\r\n                                <div key={art.id} className=\"group bg-white rounded-3xl overflow-hidden border border-gray-100 hover:shadow-2xl transition-all duration-300\">\r\n                                    <div className=\"aspect-[4/3] relative overflow-hidden bg-gray-100\">\r\n                                        <img src={art.imageUrl} alt={art.title} className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\" />\r\n                                        <div className=\"absolute top-4 right-4 bg-white/90 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold shadow-sm\">\r\n                                            ❤️ {art.likes?.length || 0}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"p-6\">\r\n                                        <div className=\"flex justify-between items-start mb-2\">\r\n                                            <div>\r\n                                                <h3 className=\"font-bold text-xl text-gray-900\">{art.title}</h3>\r\n                                                <p className=\"text-indigo-600 text-sm font-medium\">\r\n                                                    by {art.artist?.name || \"Unknown Artist\"}\r\n                                                </p>\r\n                                            </div>\r\n                                            <span className=\"text-indigo-600 font-bold\">${art.price}</span>\r\n                                        </div>\r\n                                        <p className=\"text-gray-400 text-sm mb-4\">\r\n                                            {art.medium} • Published {new Date(art.createdAt).toLocaleDateString()}\r\n                                        </p>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            {art.tags?.map((tag: string) => (\r\n                                                <span key={tag} className=\"bg-gray-100 text-gray-600 px-3 py-1 rounded-lg text-xs font-medium\">#{tag}</span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col items-center justify-center py-32 border-2 border-dashed border-gray-100 rounded-[2rem]\">\r\n                            <p className=\"text-gray-400 mb-4\">No artworks found.</p>\r\n                            <button onClick={() => setIsUploading(true)} className=\"text-indigo-600 font-bold hover:underline\">Start your first listing</button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* MODAL */}\r\n                {isUploading && (\r\n                    <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8\">\r\n                        <div className=\"absolute inset-0 bg-black/40 backdrop-blur-xl\" onClick={() => setIsUploading(false)} />\r\n                        \r\n                        <div className=\"relative bg-white rounded-[3rem] p-8 md:p-12 max-w-2xl w-full shadow-2xl overflow-y-auto max-h-[90vh] z-[101]\" onClick={(e) => e.stopPropagation()}>\r\n                            <div className=\"flex justify-between items-center mb-8\">\r\n                                <h2 className=\"text-3xl font-black italic\">NEW LISTING</h2>\r\n                                <button onClick={() => setIsUploading(false)} className=\"text-gray-400 hover:text-black text-2xl\">✕</button>\r\n                            </div>\r\n                            \r\n                            <form onSubmit={handleUpload} className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div className=\"col-span-1\">\r\n                                    <div className=\"relative border-2 border-dashed border-gray-200 rounded-[2rem] aspect-square flex flex-col items-center justify-center bg-gray-50 overflow-hidden group hover:border-indigo-400\">\r\n                                        {preview ? (\r\n                                            <div className=\"relative w-full h-full\">\r\n                                                <img src={preview} className=\"w-full h-full object-cover\" alt=\"preview\" />\r\n                                                <button type=\"button\" onClick={() => {setFile(null); setPreview(null);}} className=\"absolute top-4 right-4 bg-red-500 text-white p-2 rounded-full text-xs\">✕</button>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <label className=\"cursor-pointer flex flex-col items-center p-6 text-center w-full h-full justify-center\">\r\n                                                <span className=\"text-indigo-600 font-bold mb-2\">Select Image</span>\r\n                                                <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleFileChange} />\r\n                                            </label>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"col-span-1 space-y-4\">\r\n                                    <input type=\"text\" placeholder=\"Title\" required className=\"w-full p-4 rounded-2xl bg-gray-100 outline-indigo-500\" onChange={e => setFormData({...formData, title: e.target.value})} />\r\n                                    <input type=\"number\" placeholder=\"Price ($)\" required className=\"w-full p-4 rounded-2xl bg-gray-100 outline-indigo-500\" onChange={e => setFormData({...formData, price: e.target.value})} />\r\n                                    <input type=\"text\" placeholder=\"Medium\" className=\"w-full p-4 rounded-2xl bg-gray-100 outline-indigo-500\" onChange={e => setFormData({...formData, medium: e.target.value})} />\r\n                                    <input type=\"text\" placeholder=\"Dimensions\" className=\"w-full p-4 rounded-2xl bg-gray-100 outline-indigo-500\" onChange={e => setFormData({...formData, dimensions: e.target.value})} />\r\n                                    <input type=\"text\" placeholder=\"Tags (comma separated)\" className=\"w-full p-4 rounded-2xl bg-gray-100 outline-indigo-500\" onChange={e => setFormData({...formData, tags: e.target.value})} />\r\n                                </div>\r\n\r\n                                <div className=\"pt-4 shrink-0\">\r\n                                    <button \r\n                                        type=\"submit\" \r\n                                        disabled={loading} \r\n                                        className=\"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black text-xl hover:bg-indigo-700 active:scale-[0.98] disabled:bg-gray-300 shadow-lg transition-all\"\r\n                                    >\r\n                                        {loading ? \"PROCESSING...\" : \"PUBLISH TO GALLERY\"}\r\n                                    </button>\r\n                                    <p className=\"text-center text-gray-400 text-xs mt-4 italic\">Verify all details before publishing.</p>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":99,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"redirect"},"fix":{"range":[4209,4252],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4344,4347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4344,4347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// import { getServerSession } from \"next-auth\";\r\n// import { authOptions } from \"@/lib/auth\";\r\n// import prisma from \"@/lib/prisma\";\r\n// import Navbar from \"@/components/ui/Navbar\";\r\n// import ArtCard from \"@/components/ui/ArtCard\";\r\n// import Link from \"next/link\";\r\n// import { redirect } from \"next/navigation\";\r\n\r\n// export default async function DashboardPage() {\r\n//     const session = await getServerSession(authOptions);\r\n\r\n//     if (!session?.user?.email) {\r\n//         redirect(\"/login\");\r\n//     }\r\n\r\n//     const user = await prisma.user.findUnique({\r\n//         where: { email: session.user.email },\r\n//         include: { likes: true }\r\n//     });\r\n\r\n//     if (!user?.preferences) {\r\n//         redirect(\"/onboarding\");\r\n//     }\r\n\r\n//     const preferences = user.preferences as { budget: string, styles: string[] };\r\n\r\n//     // Basic recommendation logic: filter by tags and price\r\n//     const [minPrice, maxPrice] = preferences.budget.split(\"-\").map(p => {\r\n//         if (p.includes(\"+\")) return 10000;\r\n//         return parseInt(p);\r\n//     });\r\n\r\n//     const artworks = await prisma.artwork.findMany({\r\n//         where: {\r\n//             AND: [\r\n//                 { tags: { hasSome: preferences.styles } },\r\n//                 { price: { gte: minPrice || 0 } },\r\n//                 maxPrice ? { price: { lte: maxPrice } } : {},\r\n//             ]\r\n//         },\r\n//         take: 20\r\n//     });\r\n\r\n//     const likedIds = new Set(user.likes.map((l: any) => l.artworkId));\r\n\r\n//     return (\r\n//         <div className=\"min-h-screen bg-white text-black\">\r\n//             <Navbar />\r\n//             <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n//                 <header className=\"mb-12 flex flex-col md:flex-row justify-between items-end gap-6\">\r\n//                     <div>\r\n//                         <h1 className=\"text-4xl font-extrabold text-gray-900 mb-2\">Your Personal Gallery</h1>\r\n//                         <p className=\"text-gray-500\">Curated based on your love for {preferences.styles.join(\", \")}</p>\r\n//                     </div>\r\n//                     <Link\r\n//                         href=\"/onboarding\"\r\n//                         className=\"text-sm font-bold text-indigo-600 hover:text-indigo-500 flex items-center gap-2 group\"\r\n//                     >\r\n//                         Update Preferences\r\n//                         <span className=\"group-hover:translate-x-1 transition-transform\">→</span>\r\n//                     </Link>\r\n//                 </header>\r\n\r\n//                 {artworks.length > 0 ? (\r\n//                     <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\r\n//                         {artworks.map((art: any) => (\r\n//                             <ArtCard\r\n//                                 key={art.id}\r\n//                                 artwork={{\r\n//                                     ...art,\r\n//                                     isLiked: likedIds.has(art.id)\r\n//                                 }}\r\n//                             />\r\n//                         ))}\r\n//                     </div>\r\n//                 ) : (\r\n//                     <div className=\"text-center py-32 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200\">\r\n//                         <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">No exact matches found</h3>\r\n//                         <p className=\"text-gray-600 mb-8 mx-auto max-w-sm\">We're still growing our collection. Try updating your preferences to see more results.</p>\r\n//                         <Link\r\n//                             href=\"/onboarding\"\r\n//                             className=\"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-500 transition-all\"\r\n//                         >\r\n//                             Adjust Preferences\r\n//                         </Link>\r\n//                     </div>\r\n//                 )}\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Navbar from \"@/components/ui/Navbar\";\r\nimport ArtCard from \"@/components/ui/ArtCard\";\r\nimport Link from \"next/link\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport default function DashboardPage() {\r\n    const [artworks, setArtworks] = useState<any[]>([]);\r\n    const [styles, setStyles] = useState<string[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const loadGallery = async () => {\r\n            try {\r\n                const res = await fetch(\"/api/user/preferences\");\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setArtworks(data.artworks);\r\n                    setStyles(data.userStyles);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to load gallery\", err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadGallery();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white text-black\">\r\n            <Navbar />\r\n            <main className=\"max-w-7xl mx-auto px-6 py-12\">\r\n                <header className=\"mb-12 flex flex-col md:flex-row justify-between items-end gap-6\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-black tracking-tight mb-2\">FOR YOU</h1>\r\n                        <p className=\"text-gray-500 font-medium\">\r\n                            {loading ? \"Curating your collection...\" : `Based on your interest in ${styles.join(\", \")}`}\r\n                        </p>\r\n                    </div>\r\n                    <Link href=\"/preferences\" className=\"text-indigo-600 font-bold hover:underline\">\r\n                        Update Preferences →\r\n                    </Link>\r\n                </header>\r\n\r\n                {loading ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 animate-pulse\">\r\n                        {[1, 2, 3].map(i => (\r\n                            <div key={i} className=\"bg-gray-100 aspect-[4/5] rounded-[2.5rem]\" />\r\n                        ))}\r\n                    </div>\r\n                ) : artworks.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\r\n                        {artworks.map((art) => (\r\n                            <ArtCard key={art.id} artwork={art} />\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-32 bg-gray-50 rounded-[3rem] border-2 border-dashed border-gray-200\">\r\n                        <h3 className=\"text-xl font-bold mb-4\">No exact matches yet</h3>\r\n                        <Link href=\"/onboarding\" className=\"bg-black text-white px-8 py-3 rounded-2xl\">\r\n                            Broaden Preferences\r\n                        </Link>\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\login\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\login\\page.tsx:22:13\n  20 |     useEffect(() => {\n  21 |         if (searchParams.get(\"registered\")) {\n> 22 |             setSuccess(\"Account created successfully! Please sign in.\");\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |         }\n  24 |     }, [searchParams]);\n  25 |","line":22,"column":13,"nodeType":null,"endLine":22,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1437,1440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1437,1440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1630,1633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1630,1633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":107,"column":24,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4534,4578],"text":"\r\n                    Don&apos;t have an account?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4534,4578],"text":"\r\n                    Don&lsquo;t have an account?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4534,4578],"text":"\r\n                    Don&#39;t have an account?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4534,4578],"text":"\r\n                    Don&rsquo;t have an account?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, Suspense } from \"react\";\r\nimport { signIn } from \"next-auth/react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { getSession } from \"next-auth/react\";\r\nimport Link from \"next/link\";\r\n\r\nfunction LoginForm() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const [formData, setFormData] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (searchParams.get(\"registered\")) {\r\n            setSuccess(\"Account created successfully! Please sign in.\");\r\n        }\r\n    }, [searchParams]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(\"\");\r\n\r\n        const res = await signIn(\"credentials\", {\r\n            email: formData.email,\r\n            password: formData.password,\r\n            redirect: false,\r\n        });\r\n\r\n        if (res?.error) {\r\n            setError(\"Invalid email or password\");\r\n            setLoading(false);\r\n        } else {\r\n            const session = await getSession();\r\n            if (!session?.user) {\r\n                router.push(\"/dashboard\");\r\n                return;\r\n            }\r\n\r\n            if (!(session.user as any).onboarded) {\r\n                router.push(\"/onboarding\");\r\n            } else {\r\n                // Check the role and route accordingly\r\n                const userRole = (session.user as any).role;\r\n                if (userRole === \"ARTIST\") {\r\n                    router.push(\"/artist/dashboard\");\r\n                } else {\r\n                    router.push(\"/dashboard\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-md space-y-8\">\r\n            <div>\r\n                <h2 className=\"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900\">\r\n                    Sign in to Art Curator\r\n                </h2>\r\n            </div>\r\n            <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n                <div className=\"-space-y-px rounded-md shadow-sm\">\r\n                    <div>\r\n                        <input\r\n                            type=\"email\"\r\n                            required\r\n                            className=\"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3\"\r\n                            placeholder=\"Email address\"\r\n                            value={formData.email}\r\n                            onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"password\"\r\n                            required\r\n                            className=\"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3\"\r\n                            placeholder=\"Password\"\r\n                            value={formData.password}\r\n                            onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {success && <p className=\"text-sm text-green-600 font-medium text-center\">{success}</p>}\r\n                {error && <p className=\"text-sm text-red-600 font-medium text-center\">{error}</p>}\r\n\r\n                <div>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"group relative flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-indigo-400\"\r\n                    >\r\n                        {loading ? \"Signing in...\" : \"Sign in\"}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n            <div className=\"text-center\">\r\n                <p className=\"text-sm text-gray-600\">\r\n                    Don't have an account?{\" \"}\r\n                    <Link href=\"/register\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n                        Sign up\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function LoginPage() {\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8\">\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n                <LoginForm />\r\n            </Suspense>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\onboarding\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'status' is assigned a value but never used.","line":30,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useSession } from \"next-auth/react\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Navbar from \"@/components/ui/Navbar\";\r\n\r\nconst ART_STYLES = [\r\n    \"Minimalist\", \"Pop Art\", \"Impressionism\", \"Abstract\",\r\n    \"Contemporary\", \"Street Art\", \"Classic\", \"Surrealism\",\r\n    \"Cyberpunk\", \"Art Deco\", \"Expressionism\", \"Renaissance\",\r\n    \"Bauhaus\", \"Baroque\", \"Photography\", \"Sculpture\"\r\n];\r\n\r\nconst CONTEXTS = [\r\n    { label: \"🏡 Home\", value: \"home\", description: \"Warm and personal spaces\" },\r\n    { label: \"🏢 Office\", value: \"office\", description: \"Professional and inspiring\" },\r\n    { label: \"🖼️ Collection\", value: \"collection\", description: \"Building a curated portfolio\" }\r\n];\r\n\r\nconst BUDGET_RANGES = [\r\n    { label: \"Under $500\", value: \"0-500\" },\r\n    { label: \"$500 - $2,000\", value: \"500-2000\" },\r\n    { label: \"$2,000 - $10,000\", value: \"2000-10000\" },\r\n    { label: \"$10,000+\", value: \"10000+\" },\r\n];\r\n\r\nexport default function OnboardingPage() {\r\n    const router = useRouter();\r\n    const { data: session, update, status } = useSession();\r\n    const [step, setStep] = useState(0);\r\n    const [role, setRole] = useState<\"COLLECTOR\" | \"ARTIST\" | null>(null);\r\n    const [preferences, setPreferences] = useState({\r\n        context: \"\",\r\n        budget: \"\",\r\n        styles: [] as string[],\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const toggleStyle = (style: string) => {\r\n        setPreferences(prev => ({\r\n            ...prev,\r\n            styles: prev.styles.includes(style)\r\n                ? prev.styles.filter(s => s !== style)\r\n                : [...prev.styles, style]\r\n        }));\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setLoading(true);\r\n        console.log(\"Sending to API:\", { role, ...preferences });\r\n        try {\r\n            const res = await fetch(\"/api/user/preferences\", {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ role, ...preferences }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                await update({\r\n                    ...session,\r\n                    user: {\r\n                        ...session?.user,\r\n                        role: role,\r\n                        onboarded: true\r\n                    }\r\n                });\r\n\r\n                if (role === \"ARTIST\") {\r\n                    router.push(\"/artist/dashboard\");\r\n                } else {\r\n                    router.push(\"/dashboard\");\r\n                }\r\n                router.refresh();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to save preferences\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 text-black\">\r\n            <Navbar />\r\n            <div className=\"max-w-2xl mx-auto py-16 px-4\">\r\n                <div className=\"bg-white rounded-3xl shadow-xl p-8 md:p-12 transition-all\">\r\n                    \r\n                    {/* Progress Indicator */}\r\n                    <div className=\"mb-10 text-center\">\r\n                        <span className=\"text-indigo-600 font-bold text-sm tracking-widest uppercase\">\r\n                            Step {step + 1} of 4\r\n                        </span>\r\n                        <h1 className=\"text-3xl font-bold mt-4\">\r\n                            {step === 0 && \"Welcome! How will you use the platform?\"}\r\n                            {step === 1 && \"Where will this art be displayed?\"}\r\n                            {step === 2 && \"What is your preferred budget?\"}\r\n                            {step === 3 && \"Which styles speak to you?\"}\r\n                        </h1>\r\n                    </div>\r\n\r\n                    {/* Step 0: Role Selection */}\r\n                    {step === 0 && (\r\n                        <div className=\"grid gap-4\">\r\n                            <button onClick={() => { setRole(\"COLLECTOR\"); setStep(1); }}\r\n                                className=\"p-8 border-2 rounded-2xl text-left hover:border-indigo-600 transition-all group\">\r\n                                <h3 className=\"text-xl font-bold group-hover:text-indigo-600\">I am a Collector</h3>\r\n                                <p className=\"text-gray-500\">I want to discover and buy unique art.</p>\r\n                            </button>\r\n                            <button onClick={() => { setRole(\"ARTIST\"); setStep(1); }}\r\n                                className=\"p-8 border-2 rounded-2xl text-left hover:border-indigo-600 transition-all group\">\r\n                                <h3 className=\"text-xl font-bold group-hover:text-indigo-600\">I am an Artist</h3>\r\n                                <p className=\"text-gray-500\">I want to showcase and sell my work.</p>\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 1: Context (Only for Collector) */}\r\n                    {step === 1 && (\r\n                        <div className=\"grid gap-4\">\r\n                            {CONTEXTS.map((ctx) => (\r\n                                <button key={ctx.value} onClick={() => setPreferences({ ...preferences, context: ctx.value })}\r\n                                    className={`w-full p-6 text-left rounded-2xl border-2 transition-all ${preferences.context === ctx.value ? \"border-indigo-600 bg-indigo-50\" : \"border-gray-100\"}`}>\r\n                                    <p className=\"text-lg font-bold\">{ctx.label}</p>\r\n                                    <p className=\"text-sm text-gray-500\">{ctx.description}</p>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 2: Budget */}\r\n                    {step === 2 && (\r\n                        <div className=\"grid gap-4\">\r\n                            {BUDGET_RANGES.map((range) => (\r\n                                <button key={range.value} onClick={() => setPreferences({ ...preferences, budget: range.value })}\r\n                                    className={`w-full p-6 text-left rounded-2xl border-2 transition-all ${preferences.budget === range.value ? \"border-indigo-600 bg-indigo-50\" : \"border-gray-100\"}`}>\r\n                                    <p className=\"text-lg font-bold\">{range.label}</p>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 3: Styles */}\r\n                    {step === 3 && (\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                            {ART_STYLES.map((style) => (\r\n                                <button key={style} onClick={() => toggleStyle(style)}\r\n                                    className={`p-3 text-sm rounded-xl border-2 transition-all ${preferences.styles.includes(style) ? \"border-indigo-600 bg-indigo-50 font-bold\" : \"border-gray-100\"}`}>\r\n                                    {style}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Navigation */}\r\n                    {step > 0 && (\r\n                        <div className=\"mt-12 flex justify-between gap-4\">\r\n                            <button onClick={() => setStep(step - 1)} className=\"px-8 py-4 font-bold text-gray-400\">Back</button>\r\n                            <button\r\n                                onClick={step === 3 ? handleSave : () => setStep(step + 1)}\r\n                                disabled={loading}\r\n                                className=\"flex-1 px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg\"\r\n                            >\r\n                                {loading ? \"Saving...\" : step === 3 ? \"Find My Art\" : \"Next Step\"}\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":69,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3983,4107],"text":"\n                Recommendations tailored to your specific space, whether it&apos;s your home, office, or gallery.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3983,4107],"text":"\n                Recommendations tailored to your specific space, whether it&lsquo;s your home, office, or gallery.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3983,4107],"text":"\n                Recommendations tailored to your specific space, whether it&#39;s your home, office, or gallery.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3983,4107],"text":"\n                Recommendations tailored to your specific space, whether it&rsquo;s your home, office, or gallery.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Navbar from \"@/components/ui/Navbar\";\nimport Link from \"next/link\";\n\nexport default function Home() {\n  return (\n    <main className=\"min-h-screen bg-white\">\n      <Navbar />\n\n      {/* Hero Section */}\n      <section className=\"relative py-20 overflow-hidden\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h1 className=\"text-5xl md:text-6xl font-extrabold tracking-tight text-gray-900 mb-6\">\n            Discover Art That <span className=\"text-indigo-600\">Speaks to You</span>\n          </h1>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed\">\n            Our AI-powered curator understands your taste, budget, and space to find the perfect addition to your collection.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/register\"\n              className=\"px-8 py-4 bg-indigo-600 text-white rounded-lg font-bold text-lg hover:bg-indigo-500 transition-all shadow-lg hover:shadow-indigo-200\"\n            >\n              Start Free Curation\n            </Link>\n            <Link\n              href=\"/login\"\n              className=\"px-8 py-4 border-2 border-gray-200 text-gray-700 rounded-lg font-bold text-lg hover:border-indigo-600 hover:text-indigo-600 transition-all\"\n            >\n              Sign In\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Features Grid */}\n      <section className=\"py-24 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid md:grid-cols-3 gap-12 text-center\">\n            <div className=\"p-8\">\n              <div className=\"w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-8 h-8 text-indigo-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-bold mb-3\">Taste Profiling</h3>\n              <p className=\"text-gray-600 text-sm leading-relaxed\">\n                Analyze your preferences across styles, colors, and movements for deep personalization.\n              </p>\n            </div>\n            <div className=\"p-8\">\n              <div className=\"w-16 h-16 bg-pink-100 rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-8 h-8 text-pink-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-bold mb-3\">Budget Sensitivity</h3>\n              <p className=\"text-gray-600 text-sm leading-relaxed\">\n                Find incredible art that fits your price point, from emerging artists to blue chip.\n              </p>\n            </div>\n            <div className=\"p-8\">\n              <div className=\"w-16 h-16 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                <svg className=\"w-8 h-8 text-emerald-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-bold mb-3\">Context Aware</h3>\n              <p className=\"text-gray-600 text-sm leading-relaxed\">\n                Recommendations tailored to your specific space, whether it's your home, office, or gallery.\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\preferences\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1417,1420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1417,1420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Navbar from \"@/components/ui/Navbar\";\r\n\r\nconst ART_STYLES = [\"Minimalist\", \"Pop Art\", \"Impressionism\", \"Abstract\", \"Contemporary\", \"Street Art\", \"Classic\", \"Surrealism\", \"Cyberpunk\", \"Art Deco\", \"Expressionism\", \"Renaissance\", \"Bauhaus\", \"Baroque\", \"Photography\", \"Sculpture\"];\r\n\r\nconst CONTEXTS = [\r\n    { label: \"🏡 Home\", value: \"home\", description: \"Warm and personal\" },\r\n    { label: \"🏢 Office\", value: \"office\", description: \"Professional space\" },\r\n    { label: \"🖼️ Collection\", value: \"collection\", description: \"Curated portfolio\" }\r\n];\r\n\r\nconst BUDGET_RANGES = [\r\n    { label: \"Under $500\", value: \"0-500\" },\r\n    { label: \"$500 - $2k\", value: \"500-2000\" },\r\n    { label: \"$2k - $10k\", value: \"2000-10000\" },\r\n    { label: \"$10k+\", value: \"10000+\" },\r\n];\r\n\r\nexport default function PreferencesPage() {\r\n    const { data: session, update } = useSession();\r\n    const router = useRouter();\r\n    const [prefs, setPrefs] = useState({ \r\n        context: \"\", \r\n        budget: \"\", \r\n        styles: [] as string[] \r\n    });\r\n    const [saving, setSaving] = useState(false);\r\n    const [hasLoaded, setHasLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (session?.user && !hasLoaded) {\r\n            const userPrefs = (session.user as any).preferences;\r\n            if (userPrefs) {\r\n                setPrefs(userPrefs);\r\n                setHasLoaded(true);\r\n            }\r\n        }\r\n    }, [session, hasLoaded]);\r\n\r\n    const toggleStyle = (style: string) => {\r\n        setPrefs(prev => {\r\n            const currentStyles = prev.styles || [];\r\n            const isSelected = currentStyles.includes(style);\r\n            return {\r\n                ...prev,\r\n                styles: isSelected \r\n                    ? currentStyles.filter(s => s !== style) \r\n                    : [...currentStyles, style]\r\n            };\r\n        });\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setSaving(true);\r\n        try {\r\n            const res = await fetch(\"/api/user/preferences\", {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ ...prefs }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                await update();\r\n                router.push(\"/dashboard\");\r\n                router.refresh();\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pb-24\">\r\n            <Navbar />\r\n            <main className=\"max-w-4xl mx-auto px-6 py-12\">\r\n                <div className=\"mb-10\">\r\n                    <h1 className=\"text-4xl text-black font-black tracking-tighter\">PREFERENCES</h1>\r\n                    <p className=\"text-gray-500\">Fine-tune your discovery engine.</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-12 bg-white p-8 md:p-12 rounded-[3rem] shadow-sm border border-gray-100\">\r\n                    {/* SECTION 1: CONTEXT */}\r\n                    <section>\r\n                        <h3 className=\"text-xs font-bold text-indigo-600 uppercase tracking-[0.2em] mb-6\">1. Display Context</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            {CONTEXTS.map(ctx => (\r\n                                <button key={ctx.value} onClick={() => setPrefs({...prefs, context: ctx.value})}\r\n                                    className={`p-5 rounded-2xl border-2 text-left transition-all ${prefs.context === ctx.value ? \"border-black bg-black text-black\" : \"border-gray-100 hover:border-gray-300\"}`}>\r\n                                    <p className=\"font-bold text-black\">{ctx.label}</p>\r\n                                    <p className={`text-xs ${prefs.context === ctx.value ? \"text-black\" : \"text-black\"}`}>{ctx.description}</p>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* SECTION 2: BUDGET */}\r\n                    <section>\r\n                        <h3 className=\"text-xs font-bold text-indigo-600 uppercase tracking-[0.2em] mb-6\">2. Investment Range</h3>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            {BUDGET_RANGES.map(r => (\r\n                                <button key={r.value} onClick={() => setPrefs({...prefs, budget: r.value})}\r\n                                    className={`p-4 rounded-2xl border-2 text-black font-bold transition-all ${prefs.budget === r.value ? \"border-black bg-black text-black\" : \"border-gray-100 hover:border-gray-300\"}`}>\r\n                                    {r.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* SECTION 3: STYLES */}\r\n                    <section>\r\n                        <h3 className=\"text-xs font-bold text-indigo-600 uppercase tracking-[0.2em] mb-6\">3. Aesthetic Interest</h3>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                            {ART_STYLES.map(style => (\r\n                                <button key={style} onClick={() => toggleStyle(style)}\r\n                                    className={`p-3 text-black text-sm rounded-xl border-2 transition-all font-medium ${prefs.styles.includes(style) ? \"bg-indigo-600 border-indigo-600 text-white\" : \"border-gray-100 hover:border-gray-200\"}`}>\r\n                                    {style}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </main>\r\n\r\n            {/* ACTION BUTTON */}\r\n            <div className=\"fixed bottom-0 left-0 right-0 p-6 bg-white/80 backdrop-blur-md border-t border-gray-100 flex justify-center\">\r\n                <div className=\"max-w-4xl w-full flex gap-4\">\r\n                    <button onClick={() => router.back()} className=\"px-8 py-4 font-bold text-gray-500 hover:text-black transition-colors\">\r\n                        Cancel\r\n                    </button>\r\n                    <button \r\n                        onClick={handleSave} \r\n                        disabled={saving}\r\n                        className=\"flex-1 bg-black text-blue py-4 rounded-2xl font-bold text-lg shadow-xl shadow-black/10 hover:bg-gray-900 transition-all disabled:bg-gray-400\"\r\n                    >\r\n                        {saving ? \"Saving Changes...\" : \"Apply Preferences\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\app\\register\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":35,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function RegisterPage() {\r\n    const router = useRouter();\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(\"\");\r\n\r\n        try {\r\n            const res = await fetch(\"/api/auth/register\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            if (res.ok) {\r\n                router.push(\"/login?registered=true\");\r\n            } else {\r\n                const data = await res.json();\r\n                setError(data.message || \"Something went wrong\");\r\n            }\r\n        } catch (err) {\r\n            setError(\"An error occurred. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8\">\r\n            <div className=\"w-full max-w-md space-y-8\">\r\n                <div>\r\n                    <h2 className=\"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900\">\r\n                        Create your account\r\n                    </h2>\r\n                </div>\r\n                <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n                    <div className=\"-space-y-px rounded-md shadow-sm\">\r\n                        <div>\r\n                            <input\r\n                                type=\"text\"\r\n                                required\r\n                                className=\"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3\"\r\n                                placeholder=\"Full Name\"\r\n                                value={formData.name}\r\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                type=\"email\"\r\n                                required\r\n                                className=\"relative block w-full border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3\"\r\n                                placeholder=\"Email address\"\r\n                                value={formData.email}\r\n                                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                type=\"password\"\r\n                                required\r\n                                className=\"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3\"\r\n                                placeholder=\"Password\"\r\n                                value={formData.password}\r\n                                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {error && <p className=\"text-sm text-red-600 font-medium text-center\">{error}</p>}\r\n\r\n                    <div>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"group relative flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-indigo-400\"\r\n                        >\r\n                            {loading ? \"Registering...\" : \"Sign up\"}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-600\">\r\n                        Already have an account?{\" \"}\r\n                        <Link href=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n                            Sign in\r\n                        </Link>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\components\\providers\\SessionProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\components\\ui\\ArtCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":104,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useState } from \"react\";\r\n\r\ninterface ArtworkProps {\r\n    id: string;\r\n    title: string;\r\n    artist: {\r\n        name: string;\r\n    } | string;\r\n    imageUrl: string;\r\n    price: number;\r\n    tags: string[];\r\n    isLiked?: boolean;\r\n}\r\n\r\n// export default function ArtCard({ artwork }: { artwork: ArtworkProps }) {\r\n//     const [liked, setLiked] = useState(artwork.isLiked || false);\r\n\r\n//     const toggleLike = async () => {\r\n//         // Optimistic UI\r\n//         setLiked(!liked);\r\n//         try {\r\n//             await fetch(`/api/artwork/${artwork.id}/like`, {\r\n//                 method: \"POST\",\r\n//             });\r\n//         } catch (error) {\r\n//             setLiked(liked); // Rollback\r\n//         }\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"group bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-gray-100 flex flex-col h-full\">\r\n//             <div className=\"relative aspect-[4/5] overflow-hidden\">\r\n//                 <Image\r\n//                     src={artwork.imageUrl}\r\n//                     alt={artwork.title}\r\n//                     fill\r\n//                     className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\r\n//                 />\r\n//                 <div className=\"absolute top-4 right-4\">\r\n//                     <button\r\n//                         onClick={toggleLike}\r\n//                         className={`w-12 h-12 rounded-full flex items-center justify-center backdrop-blur-md transition-all ${liked\r\n//                                 ? \"bg-red-500 text-white shadow-lg\"\r\n//                                 : \"bg-white/70 text-gray-900 hover:bg-white hover:scale-110\"\r\n//                             }`}\r\n//                     >\r\n//                         <svg\r\n//                             className={`w-6 h-6 ${liked ? \"fill-current\" : \"fill-none\"}`}\r\n//                             stroke=\"currentColor\"\r\n//                             viewBox=\"0 0 24 24\"\r\n//                         >\r\n//                             <path\r\n//                                 strokeLinecap=\"round\"\r\n//                                 strokeLinejoin=\"round\"\r\n//                                 strokeWidth=\"2\"\r\n//                                 d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n//                             />\r\n//                         </svg>\r\n//                     </button>\r\n//                 </div>\r\n//                 <div className=\"absolute bottom-4 left-4 flex gap-1 flex-wrap\">\r\n//                     {artwork.tags.slice(0, 3).map(tag => (\r\n//                         <span key={tag} className=\"px-3 py-1 bg-white/80 backdrop-blur-sm rounded-full text-[10px] font-bold uppercase tracking-wider text-gray-700\">\r\n//                             {tag}\r\n//                         </span>\r\n//                     ))}\r\n//                 </div>\r\n//             </div>\r\n//             <div className=\"p-6 flex flex-col flex-grow\">\r\n//                 <div className=\"flex justify-between items-start mb-2\">\r\n//                     <h3 className=\"text-xl font-bold text-gray-900 group-hover:text-indigo-600 transition-colors line-clamp-1\">\r\n//                         {artwork.title}\r\n//                     </h3>\r\n//                     <span className=\"text-lg font-black text-indigo-600\">\r\n//                         ${artwork.price.toLocaleString()}\r\n//                     </span>\r\n//                 </div>\r\n//                 <p className=\"text-gray-500 font-medium mb-4\">{artwork.artist}</p>\r\n//                 <button className=\"w-full mt-auto py-3 bg-gray-50 text-gray-900 font-bold rounded-xl hover:bg-gray-900 hover:text-white transition-all transform active:scale-95\">\r\n//                     View Details\r\n//                 </button>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\n\r\nexport default function ArtCard({ artwork }: { artwork: ArtworkProps }) {\r\n    const [liked, setLiked] = useState(artwork.isLiked || false);\r\n\r\n    // Helper to handle both string and object formats\r\n    const artistName = typeof artwork.artist === 'string' \r\n        ? artwork.artist \r\n        : artwork.artist?.name || \"Unknown Artist\";\r\n\r\n    const toggleLike = async () => {\r\n        setLiked(!liked);\r\n        try {\r\n            await fetch(`/api/artwork/${artwork.id}/like`, {\r\n                method: \"POST\",\r\n            });\r\n        } catch (error) {\r\n            setLiked(liked); \r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"group bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-gray-100 flex flex-col h-full\">\r\n            <div className=\"relative aspect-[4/5] overflow-hidden\">\r\n                <Image\r\n                    src={artwork.imageUrl}\r\n                    alt={artwork.title}\r\n                    fill\r\n                    className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                />\r\n                <div className=\"absolute top-4 right-4\">\r\n                    <button\r\n                        onClick={toggleLike}\r\n                        className={`w-12 h-12 rounded-full flex items-center justify-center backdrop-blur-md transition-all ${liked\r\n                                ? \"bg-red-500 text-white shadow-lg\"\r\n                                : \"bg-white/70 text-gray-900 hover:bg-white hover:scale-110\"\r\n                            }`}\r\n                    >\r\n                        <svg\r\n                            className={`w-6 h-6 ${liked ? \"fill-current\" : \"fill-none\"}`}\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                        >\r\n                            <path\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                strokeWidth=\"2\"\r\n                                d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n                            />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n                <div className=\"absolute bottom-4 left-4 flex gap-1 flex-wrap\">\r\n                    {artwork.tags?.map(tag => (\r\n                        <span key={tag} className=\"px-3 py-1 bg-white/80 backdrop-blur-sm rounded-full text-[10px] font-bold uppercase tracking-wider text-gray-700\">\r\n                            {tag}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"p-6 flex flex-col flex-grow\">\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                    <h3 className=\"text-xl font-bold text-gray-900 group-hover:text-indigo-600 transition-colors line-clamp-1\">\r\n                        {artwork.title}\r\n                    </h3>\r\n                    <span className=\"text-lg font-black text-indigo-600\">\r\n                        ${artwork.price.toLocaleString()}\r\n                    </span>\r\n                </div>\r\n                {/* Use the helper variable here */}\r\n                <p className=\"text-gray-500 font-medium mb-4\">{artistName}</p>\r\n                <button className=\"w-full mt-auto py-3 bg-gray-50 text-gray-900 font-bold rounded-xl hover:bg-gray-900 hover:text-white transition-all transform active:scale-95\">\r\n                    View Details\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\components\\ui\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\lib\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PrismaAdapter' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"PrismaAdapter"},"fix":{"range":[114,172],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2188,2191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2188,2191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2243,2246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2243,2246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2616,2619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2616,2619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2670,2673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2670,2673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2728,2731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2728,2731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextAuthOptions } from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport { PrismaAdapter } from \"@next-auth/prisma-adapter\";\r\nimport prisma from \"@/lib/prisma\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n    // Although we are using Credentials, PrismaAdapter can still be useful for session management if using database sessions.\r\n    // For MVP with Credentials, we'll mostly use JWT-based sessions which don't strictly require an adapter,\r\n    // but it's good practice for future-proofing.\r\n    providers: [\r\n        CredentialsProvider({\r\n            name: \"credentials\",\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.email || !credentials?.password) {\r\n                    throw new Error(\"Invalid credentials\");\r\n                }\r\n\r\n                const user = await prisma.user.findUnique({\r\n                    where: {\r\n                        email: credentials.email\r\n                    }\r\n                });\r\n\r\n                if (!user || !user.password) {\r\n                    throw new Error(\"Invalid credentials\");\r\n                }\r\n\r\n                const isPasswordCorrect = await bcrypt.compare(\r\n                    credentials.password,\r\n                    user.password\r\n                );\r\n\r\n                if (!isPasswordCorrect) {\r\n                    throw new Error(\"Invalid credentials\");\r\n                }\r\n\r\n                return {\r\n                    id: user.id,\r\n                    email: user.email,\r\n                    name: user.name,\r\n                    role: user.role,\r\n                    onboarded: user.onboarded\r\n                };\r\n            }\r\n        })\r\n    ],\r\n    session: {\r\n        strategy: \"jwt\"\r\n    },\r\n    pages: {\r\n        signIn: \"/login\",\r\n    },\r\n    callbacks: {\r\n        async jwt({ token, user, trigger, session }) {\r\n            if (user) {\r\n                token.id = user.id;\r\n                token.role = (user as any).role;\r\n                token.onboarded = (user as any).onboarded;\r\n            }\r\n\r\n            if (trigger === \"update\" && session) {\r\n                token.role = session.user.role;\r\n                token.onboarded = session.user.onboarded;\r\n            \r\n            }\r\n            return token;\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user) {\r\n                (session.user as any).id = token.id;\r\n                (session.user as any).role = token.role;\r\n                (session.user as any).onboarded = token.onboarded;\r\n            }\r\n            return session;\r\n        }\r\n    },\r\n    secret: process.env.NEXTAUTH_SECRET,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\lib\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\NUS\\PINUSHACK\\recommendation-system\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]